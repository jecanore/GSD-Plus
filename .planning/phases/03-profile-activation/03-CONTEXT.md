# Phase 3: Profile Activation - Context

**Gathered:** 2026-02-14
**Status:** Ready for planning

<domain>
## Phase Boundary

Single command (`/gsd:profile-user`) that orchestrates consent, session analysis, profile generation, and artifact creation. Produces Claude-discoverable artifacts (USER-PROFILE.md, /gsd:dev-preferences command file, CLAUDE.md profile section) that affect future sessions. This phase creates the artifacts — later phases (4, 5, 8) wire them into GSD workflows automatically.

</domain>

<decisions>
## Implementation Decisions

### Consent & onboarding flow
- Consent screen combines casual headline with detailed breakdown
- Open with value proposition: why a learned profile beats vanilla Claude settings — Claude adapts to YOUR style instead of starting generic every time
- Show the 8 behavioral dimensions being analyzed (communication style, decision speed, etc.)
- Include data handling details: what's read, what's stored, what's NOT sent anywhere, sensitive content skipped
- Sell the approach: "This learns how you actually work vs. configuring settings manually"
- After consent, show step-by-step progress: "Scanning sessions..." → "Sampling messages..." → "Analyzing patterns..." → "Writing profile..."

### Profile result display
- Show a summary card (report card style) with each dimension, rating, and confidence
- Include highlight reel: 3-4 most interesting findings with evidence quotes ("You tend to...")
- Offer option to expand to full USER-PROFILE.md view
- Then proceed to artifact selection

### Orchestration modes
- Default (no flags): auto-detect sessions, proceed to analysis after consent. Falls back per Phase 2 rules: below 50 messages = hybrid (analyze + questionnaire supplement), zero sessions = questionnaire-only
- `--questionnaire`: skips session analysis entirely, questionnaire-only path (ACTV-02)
- `--refresh`: rebuilds profile even when one exists (ACTV-03). Saves old profile as USER-PROFILE.backup.md, regenerates fresh, shows compact diff of dimensions that changed rating/confidence
- Contradictory signals (context-dependent splits): present quick choice per split. Show the split with concrete examples ("You're terse in CLI projects, detailed in frontend"), offer options including "context-dependent" as a valid choice the profile can capture

### Artifact selection & output
- After profile generation, present artifact selection (multiSelect) with ALL artifacts pre-selected by default
- Available artifacts: /gsd:dev-preferences command file, CLAUDE.md profile section, global CLAUDE.md
- Generate all selected artifacts in parallel (parallel agents), then show combined summary with paths
- No "test it out" step — just summarize created artifacts and done
- When CLAUDE.md already exists: add/update profile section only, leave everything else untouched

### /gsd:dev-preferences command file
- **Namespace override (ACTV-04):** `/gsd:dev-preferences` in GSD namespace, NOT top-level. Path: `~/.claude/commands/gsd/dev-preferences.md`
- Rationale: it's part of the GSD workflow ecosystem, not a standalone personal tool. Generated by GSD, consumed by GSD workflows, adapts the entire GSD experience
- Static .md file with baked-in directives (generated once, regenerated on --refresh)
- Content: all 8 behavioral dimensions as imperative instructions + stack/tool preferences
- Stack preferences sourced from BOTH session analysis (inferred from what frameworks/tools the dev actually uses) AND questionnaire (explicit preferences). Merge both signals.
- The command file serves dual purpose: (1) manual trigger to load preferences in any session, (2) source artifact that later integration phases reference

### Claude's Discretion
- Exact consent screen copy and layout
- Progress indicator implementation (spinner, status lines, etc.)
- How the summary card is formatted (table, cards, etc.)
- Backup file naming convention for --refresh
- Parallel agent orchestration for artifact generation
- How stack preferences are structured within the command file

</decisions>

<specifics>
## Specific Ideas

- Consent screen value proposition: sell why a LEARNED profile (from actual behavior) beats manually configured settings — "Claude adapts to how you actually work, not how you think you work"
- The profile result should feel like a "report card" — quick scan, see your dimensions at a glance, dive deeper if curious
- /gsd:dev-preferences is the bridge artifact: Phase 3 creates it, Phases 4/5/8 wire it into the workflow fabric so every GSD agent adapts (discuss-phase tailors questions, plan-phase researcher focuses on preferred stack, executor matches communication style)
- Split resolution UX: "Your sessions show different patterns: CLI/backend → Terse, Frontend/UI → Balanced. Which feels more like you overall?" with "context-dependent" as a valid option

</specifics>

<deferred>
## Deferred Ideas

- Automatic profile loading in all GSD workflows without manual /gsd:dev-preferences — Phase 8 (Integration)
- CLAUDE.md auto-populated with profile sections — Phase 4 (CLAUDE.md Generation)
- Phase brief assembly including profile content for researcher/planner agents — Phase 5 (Phase Brief Assembly)
- Stack preference questions added to questionnaire — requires Phase 2 questionnaire extension (note for planning)

</deferred>

---

*Phase: 03-profile-activation*
*Context gathered: 2026-02-14*
