# Codebase Structure

**Analysis Date:** 2026-02-12

## Directory Layout

```
get-shit-done/
├── bin/                          # Installation entry point
│   └── install.js               # Runtime detection + setup orchestration (59KB)
├── commands/                     # CLI command definitions
│   └── gsd/                      # 31 GSD commands (markdown + YAML frontmatter)
│       ├── map-codebase.md       # Spawn 4 mapper agents, generate STACK/INTEGRATIONS/ARCHITECTURE/STRUCTURE/CONVENTIONS/TESTING/CONCERNS
│       ├── new-project.md        # Initialize PROJECT.md, REQUIREMENTS.md, ROADMAP.md, STATE.md, config.json
│       ├── plan-phase.md         # Orchestrate research → planning → verification for a phase
│       ├── execute-phase.md      # Wave-based parallel execution of phase plans
│       ├── verify-work.md        # Run verification checks, spawn debugger for gaps
│       └── [27 more commands]    # add-phase, remove-phase, new-milestone, check-todos, etc.
├── agents/                       # 11 specialized agent definitions
│   ├── gsd-codebase-mapper.md    # Analyze codebase (tech/arch/quality/concerns focus areas)
│   ├── gsd-planner.md            # Create PLAN.md with task specs + assumptions
│   ├── gsd-executor.md           # Execute tasks, write code/tests, commit
│   ├── gsd-verifier.md           # Verify deliverables against VERIFICATION.md
│   ├── gsd-debugger.md           # Identify root causes of test failures
│   ├── gsd-phase-researcher.md   # Research domain/technology for planning phase
│   ├── gsd-project-researcher.md # Gather project context from external sources
│   ├── gsd-plan-checker.md       # Validate PLAN.md structure + task completeness
│   ├── gsd-roadmapper.md         # Create ROADMAP.md with phase breakdown
│   ├── gsd-integration-checker.md # Validate integration points work
│   └── gsd-research-synthesizer.md # Synthesize multiple research documents
├── get-shit-done/                # Core tools and templates
│   ├── bin/
│   │   ├── gsd-tools.js          # 161KB centralized CLI utility (40+ atomic commands)
│   │   └── gsd-tools.test.js     # 76KB test suite for gsd-tools
│   ├── templates/                # Document templates for agents to fill
│   │   ├── codebase/             # Codebase analysis templates (7 files)
│   │   │   ├── stack.md          # Technology stack template
│   │   │   ├── integrations.md   # External APIs/services template
│   │   │   ├── architecture.md   # Architecture pattern template
│   │   │   ├── structure.md      # Directory layout template
│   │   │   ├── conventions.md    # Code style/naming template
│   │   │   ├── testing.md        # Testing patterns template
│   │   │   └── concerns.md       # Technical debt template
│   │   ├── project.md            # PROJECT.md template (project context)
│   │   ├── requirements.md       # REQUIREMENTS.md template (scoped reqs)
│   │   ├── config.json           # Default config template
│   │   ├── phase-prompt.md       # Phase execution template
│   │   ├── debug-subagent-prompt.md # Debugger context template
│   │   └── [more templates]
│   ├── workflows/                # 30+ orchestration workflows (markdown process docs)
│   │   ├── new-project.md        # Flow: questioning → research → requirements → roadmap
│   │   ├── plan-phase.md         # Flow: validate → research → plan → verify loop
│   │   ├── execute-phase.md      # Flow: discover plans → analyze deps → wave exec → verify
│   │   ├── verify-work.md        # Flow: verify artifacts → debug gaps → create fix plans
│   │   ├── map-codebase.md       # Flow: spawn 4 parallel mappers, collect results
│   │   ├── execute-plan.md       # Single plan execution: parse → setup → execute → verify
│   │   ├── discover-phase.md     # Project discovery workflow
│   │   └── [23 more workflows]
│   ├── references/               # Static reference materials
│   │   ├── questioning.md        # Standard questions for project discovery
│   │   ├── ui-brand.md           # GSD UI conventions and branding
│   │   └── [other references]
└── hooks/                        # Post-install hooks and utilities
    ├── gsd-check-update.js      # Check for GSD updates
    └── gsd-statusline.js        # Render statusline for shell integration
    └── dist/                    # Built hooks (compiled via esbuild)

.github/                          # GitHub workflows and templates
├── workflows/                    # GitHub Actions workflows
│   ├── *.yml                     # CI/CD pipelines
└── ISSUE_TEMPLATE/               # Issue templates for bug reports, features

.planning/                        # Project planning state (user's project workspace)
├── codebase/                     # Codebase analysis documents (generated by /gsd:map-codebase)
│   ├── STACK.md                  # Technology stack
│   ├── INTEGRATIONS.md           # External service integrations
│   ├── ARCHITECTURE.md           # Architecture patterns
│   ├── STRUCTURE.md              # Directory structure
│   ├── CONVENTIONS.md            # Code conventions
│   ├── TESTING.md                # Testing patterns
│   └── CONCERNS.md               # Technical debt
├── config.json                   # Project configuration (model_profile, branching_strategy, etc.)
├── PROJECT.md                    # Project context and goals
├── REQUIREMENTS.md               # Scoped requirements
├── ROADMAP.md                    # Phase breakdown
├── STATE.md                       # Project state (progress, decisions, blockers)
├── phases/                       # Phase execution directories
│   ├── 01/                       # Phase 1 (2-zero-padded or decimal)
│   │   ├── PLAN.md               # Phase planning document
│   │   ├── plans/                # Individual task plans
│   │   │   ├── 1.md              # Task 1 PLAN.md
│   │   │   ├── 2.md              # Task 2 PLAN.md
│   │   │   └── [more]
│   │   ├── SUMMARY.md            # Execution results summary
│   │   ├── VERIFICATION.md       # Post-execution verification checklist
│   │   └── research/             # Domain research if generated
│   ├── 02/, 03/, ... phases
└── research/                     # Project-level research directory (optional)
```

## Directory Purposes

**`bin/`:**
- Purpose: NPM package entry point
- Contains: Installation script that detects runtime (Claude Code, OpenCode, Gemini) and sets up config directories
- Key files: `install.js` (59KB)

**`commands/gsd/`:**
- Purpose: Declare all user-facing CLI commands
- Contains: 31 markdown files, each with YAML frontmatter (name, description, allowed-tools, argument-hint, execution_context)
- Key files: `map-codebase.md`, `new-project.md`, `plan-phase.md`, `execute-phase.md`, `verify-work.md`
- Pattern: Each file is a command declaration that routes to a workflow

**`agents/`:**
- Purpose: Define specialized agent roles and responsibilities
- Contains: 11 agent markdown files with role declaration, tool allowlist, process steps, templates
- Key files: `gsd-codebase-mapper.md`, `gsd-planner.md`, `gsd-executor.md`, `gsd-verifier.md`

**`get-shit-done/bin/`:**
- Purpose: Core CLI utilities and tests
- Key files:
  - `gsd-tools.js` (161KB): 40+ atomic commands for state/config management, phase ops, validation, git operations
  - `gsd-tools.test.js` (76KB): Node.js test suite validating all atomic commands

**`get-shit-done/templates/codebase/`:**
- Purpose: Markdown templates for codebase analysis documents
- Contains: 7 template files (STACK.md, INTEGRATIONS.md, ARCHITECTURE.md, STRUCTURE.md, CONVENTIONS.md, TESTING.md, CONCERNS.md)
- Consumed by: `gsd-codebase-mapper` agents

**`get-shit-done/templates/`:**
- Purpose: Document templates for planning, execution, verification
- Key files: `project.md`, `requirements.md`, `config.json`, `phase-prompt.md`, `context.md`, `UAT.md`, `verification-report.md`

**`get-shit-done/workflows/`:**
- Purpose: Step-by-step orchestration logic for commands
- Contains: 30+ markdown workflow files with numbered steps, gates, error handling
- Key files: `new-project.md`, `plan-phase.md`, `execute-phase.md`, `verify-work.md`, `map-codebase.md`

**`get-shit-done/references/`:**
- Purpose: Static reference materials (questioning guides, UI branding)
- Key files: `questioning.md`, `ui-brand.md`

**`hooks/`:**
- Purpose: Post-install utilities and shell integration
- Key files: `gsd-check-update.js`, `gsd-statusline.js`

**`.planning/codebase/`:**
- Purpose: Codebase analysis documents (user's workspace)
- Contains: 7 markdown files generated by `/gsd:map-codebase` command
- Pattern: Analysis documents for tech stack, integrations, architecture, conventions, testing, concerns

**`.planning/phases/`:**
- Purpose: Phase execution artifacts
- Structure: `phases/{N}/PLAN.md`, `phases/{N}/plans/*.md`, `phases/{N}/SUMMARY.md`, `phases/{N}/VERIFICATION.md`
- Populated by: `/gsd:plan-phase` → `/gsd:execute-phase` → `/gsd:verify-work` workflow chain

## Key File Locations

**Entry Points:**
- `bin/install.js`: NPM package entry point (runs on `npm install get-shit-done-cc`)
- `get-shit-done/bin/gsd-tools.js`: CLI utility entry point (invoked via `node gsd-tools.js <command>`)
- `commands/gsd/*.md`: Command definition entry points (referenced by @command-name in chat)

**Configuration:**
- `.planning/config.json`: Project workflow preferences (model_profile, branching_strategy, research, verifier, parallelization)
- `get-shit-done/templates/config.json`: Default config template

**Core Logic:**
- `get-shit-done/bin/gsd-tools.js`: State management, phase operations, validation, git orchestration (161KB single file)
- `get-shit-done/workflows/*.md`: Multi-step orchestration workflows

**State Persistence:**
- `.planning/STATE.md`: Project progress, decisions, blockers, session continuity
- `.planning/ROADMAP.md`: Phase breakdown and phase descriptions
- `.planning/PROJECT.md`: Project goals and context
- `.planning/REQUIREMENTS.md`: Scoped requirements

**Testing:**
- `get-shit-done/bin/gsd-tools.test.js`: Test suite for atomic commands
- Run via: `npm test`

## Naming Conventions

**Files:**
- Commands: `commands/gsd/{kebab-case}.md` (map-codebase.md, new-project.md)
- Agents: `agents/{gsd-agent-name}.md` (gsd-codebase-mapper.md, gsd-planner.md)
- Workflows: `get-shit-done/workflows/{kebab-case}.md` (plan-phase.md, execute-phase.md)
- Templates: `get-shit-done/templates/{name}.md` (project.md, requirements.md)
- Phases: `.planning/phases/{N}/` (01, 02, or decimal: 1.1, 1.2)
- Planning documents: `UPPERCASE.md` (PROJECT.md, ROADMAP.md, STATE.md, PLAN.md, SUMMARY.md, VERIFICATION.md)
- Codebase docs: `UPPERCASE.md` in `.planning/codebase/` (STACK.md, ARCHITECTURE.md, CONVENTIONS.md, etc.)

**Directories:**
- Config directories: `.{runtime}` (`.claude/get-shit-done/`, `.opencode/`, `.gemini/`)
- Phase directories: `phases/{N}/` (phases/01/, phases/02/)
- Planning directories: `.planning/` with subdirs (codebase/, phases/, research/)
- Workflow/template directories: `get-shit-done/` with subdirs (bin/, templates/, workflows/, references/)

## Where to Add New Code

**New Command:**
- Primary definition: `commands/gsd/{command-name}.md` (YAML frontmatter with name, description, allowed-tools, execution_context that references a workflow)
- Workflow implementation: `get-shit-done/workflows/{command-name}.md` (numbered steps)
- Templates if needed: `get-shit-done/templates/` or `get-shit-done/templates/codebase/`

**New Agent:**
- Definition: `agents/{gsd-agent-name}.md` (role, tools, process, templates)
- Add entry to MODEL_PROFILES in `get-shit-done/bin/gsd-tools.js` line 125-137 if it needs model routing
- Add to command's allowed agents or spawn via workflow

**New gsd-tools.js Command:**
- Location: `get-shit-done/bin/gsd-tools.js` (edit monolithic file)
- Pattern: Add handler function and add to command dispatch block
- Tests: Add corresponding test cases in `get-shit-done/bin/gsd-tools.test.js`

**New Workflow:**
- Location: `get-shit-done/workflows/{name}.md`
- Pattern: Numbered steps with gates, state mutations via gsd-tools.js calls, agent spawning
- Reference from: Command file's execution_context (@~/.claude/get-shit-done/workflows/{name}.md)

**Utilities/Helpers:**
- Shared Node.js: Keep in `get-shit-done/bin/gsd-tools.js` (monolithic utility)
- Post-install hooks: `hooks/{name}.js` → compiled to `hooks/dist/` via esbuild

## Special Directories

**`.planning/codebase/`:**
- Purpose: Generated codebase analysis documents
- Generated: Yes (by /gsd:map-codebase command)
- Committed: Yes (to project git repo)
- Files: STACK.md, INTEGRATIONS.md, ARCHITECTURE.md, STRUCTURE.md, CONVENTIONS.md, TESTING.md, CONCERNS.md

**`.planning/phases/`:**
- Purpose: Phase execution artifacts
- Generated: Yes (by /gsd:plan-phase and /gsd:execute-phase)
- Committed: Yes (PLAN.md, SUMMARY.md, VERIFICATION.md)
- Structure: `phases/{N}/PLAN.md`, `phases/{N}/plans/*.md`, `phases/{N}/SUMMARY.md`, `phases/{N}/VERIFICATION.md`

**`.planning/research/`:**
- Purpose: Domain and project research documents
- Generated: Yes (by gsd-phase-researcher, gsd-project-researcher)
- Committed: Yes (optional, depends on --research flag)
- Files: RESEARCH.md per phase, project-level research aggregation

**`get-shit-done/templates/codebase/`:**
- Purpose: Template files for codebase analysis agents
- Generated: No
- Committed: Yes (part of GSD package)

**`hooks/dist/`:**
- Purpose: Compiled hook scripts
- Generated: Yes (esbuild during npm prepublishOnly)
- Committed: Yes (shipping with package)

---

*Structure analysis: 2026-02-12*
